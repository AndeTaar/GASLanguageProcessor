num cheight = 400;

color red = Color(255, 0, 0, 1);
color white = Color(255, 255, 255, 1);
color blue = Color(0, 0, 255, 1);
color black = Color(0, 0, 0, 1);

num amount = 5;
num offset = 10;
num gradualOffset = 100;
num width = 380;
num height = 100;
num starty = 10;
num startx = 80;
list<polygon> l = List<polygon>{};
list<text> t = List<text>{};
list<string> s = List<string>{"Source Code", "Lexer", "Parser", "Semantic Analysis", "Result", "Interpreter"};
list<arrow> a = List<arrow>{};

for (num i = 0; i < 6; i+=1) {
    num x = offset + width * i + startx;
    num awidth = width;
    if(i == 0) {
        awidth = width/2+40;
        x -= (width*i)/2+40;
    }
    if(i < 3 && i > 0) {
        awidth = width/2;
    }
    if(i != 0 && i != 4) {
        x -= (width*i)/2;
    }
    point start = Point(x, cheight/2-height/2);
    point end = Point(x + awidth, cheight/2+height/2);
    offset += gradualOffset;
    if(i==0) {
        AddToList(Rectangle(start, end, 5, white, black, 10), l);
    }else{
        AddToList(Rectangle(start, end, 0, red, white, 10), l);
    }

    if(i == 0) {
        AddToList(Text(GetFromList(i, s), Point(x+20, cheight/2+13), "", 40, 600, black), t);
        AddToList(Arrow(Point(x+awidth+10,cheight/2), Point(x+awidth+gradualOffset-10, cheight/2), 10, black), a);

    }else if(i == 5){
        AddToList(Text(GetFromList(i, s), Point(x+20, cheight/2+13), "", 40, 600, black), t);
    }
    else if(i < 3) {
        AddToList(Text(GetFromList(i, s), Point(x+40, cheight/2+13), "", 40, 600, white), t);
        AddToList(Arrow(Point(x+awidth+10,cheight/2), Point(x+awidth+gradualOffset-10, cheight/2), 10, black), a);
    }else{
        AddToList(Text(GetFromList(i, s), Point(x+10, cheight/2+13), "", 40, 600, white), t);
        AddToList(Arrow(Point(x+awidth+10,cheight/2), Point(x+awidth+gradualOffset-10, cheight/2), 10, black), a);
    }

}

num cwidth = width * amount + offset;

canvas (cwidth, cheight, Color(255, 255, 255, 1));
